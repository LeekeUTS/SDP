@model MvcApplication1.Models.RegisterModel
@{
    ViewBag.Title = "Register";
}

<hgroup class="title">
    <h1>@ViewBag.Title.</h1>
    <h2>Create a new account.</h2>
</hgroup>

@using (Html.BeginForm()) {
    @Html.AntiForgeryToken()
    @Html.ValidationSummary()

    <fieldset>
        <legend>Registration Form</legend>
        <ol>
            <li>
                @Html.LabelFor(m => m.UserName)
                @Html.TextBoxFor(m => m.UserName)
            </li>
            <li>
                @Html.LabelFor(m => m.Password)
                @Html.PasswordFor(m => m.Password)
            </li>
            <li>
                @Html.LabelFor(m => m.ConfirmPassword)
                @Html.PasswordFor(m => m.ConfirmPassword)
            </li>
        </ol>
        @* javascript:todo_add($('#todo_form [name=content]').val() , $('#todo_form [name=private]:checked').val() ,  $('#todo_form [name=star]:checked').val() , $('#todo_assign_uid').val());void(0); *@
        <a class="btn btn-primary" href='javascript:json_check($("#UserName").val())'>Pre Submit</a>
        <input type="submit" value="Register" id="Reg-Submit" class="none"/>
    </fieldset>
}
<script>
    function json_check(username) {
        alert(username);
        $.ajax({
            // Json_WorkshopWorkshopSets
            type: "Get",
            beforeSend: function (request) {
                request.setRequestHeader("AppKey", "123456");
                $(".f_loading").removeClass("none");
            },
            contentType: "application/json",
            url: JsonUrl + "api/student?id=" + username,
            dataType: "json",
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("Request: " + XMLHttpRequest.toString() + "\n\nStatus: " + textStatus + "\n\nError: " + errorThrown);
            },
            success: function (result) {
                json = result.Student
                if (json == null) {
                    alert(null);
                } else {
                    $("#Reg-Submit").click();
                }
            }
        })
    }

</script>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
